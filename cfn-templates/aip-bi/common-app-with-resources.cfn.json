{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "Common app and resources creation",
    "Resources": {
        "biapp": {
            "Type": "AWS::ElasticBeanstalk::Application",
            "Properties": {
                "ApplicationName": {
                    "Fn::Join": [
                        "-",
                        [
                            "bi-app",
                            {
                                "Ref": "AWS::Region"
                            }
                        ]
                    ]
                },
                "Description": "AWS Elastic Beanstalk BI Application"
            }
        },
        "etlapp": {
            "Type": "AWS::ElasticBeanstalk::Application",
            "Properties": {
                "ApplicationName": {
                    "Fn::Join": [
                        "-",
                        [
                            "etl",
                            {
                                "Ref": "AWS::Region"
                            }
                        ]
                    ]
                },
                "Description": "AWS Elastic Beanstalk ETL Application"
            }
        },
        "platformapp": {
            "Type": "AWS::ElasticBeanstalk::Application",
            "Properties": {
                "ApplicationName": {
                    "Fn::Join": [
                        "-",
                        [
                            "aip",
                            {
                                "Ref": "AWS::Region"
                            }
                        ]
                    ]
                },
                "Description": "AWS Elastic Beanstalk Platform Application"
            }
        },
        "proxyapp": {
            "Type": "AWS::ElasticBeanstalk::Application",
            "Properties": {
                "ApplicationName": {
                    "Fn::Join": [
                        "-",
                        [
                            "proxy",
                            {
                                "Ref": "AWS::Region"
                            }
                        ]
                    ]
                },
                "Description": "AWS Elastic Beanstalk Proxy Application"
            }
        },
        "chronosapp": {
            "Type": "AWS::ElasticBeanstalk::Application",
            "Properties": {
                "ApplicationName": {
                    "Fn::Join": [
                        "-",
                        [
                            "aip-chronos",
                            {
                                "Ref": "AWS::Region"
                            }
                        ]
                    ]
                },
                "Description": "AWS Elastic Beanstalk Chronos Application"
            }
        },
        "datapipelineapp": {
            "Type": "AWS::ElasticBeanstalk::Application",
            "Properties": {
                "ApplicationName": {
                    "Fn::Join": [
                        "-",
                        [
                            "bi-datapipeline-service",
                            {
                                "Ref": "AWS::Region"
                            }
                        ]
                    ]
                },
                "Description": "AWS Elastic Beanstalk Datapipeline Application"
            }
        },
        "devaipsnsdaychanged": {
            "Type": "AWS::SNS::Topic",
            "Properties": {
                "Subscription": [
                    {
                        "Endpoint": {
                            "Fn::Join": [
                                "",
                                [
                                    "arn:aws:sqs:",
                                    {
                                        "Ref": "AWS::Region"
                                    },
                                    ":",
                                    {
                                        "Ref": "AWS::AccountId"
                                    },
                                    ":bi-dev-sqs-datapipeline-service"
                                ]
                            ]
                        },
                        "Protocol": "sqs"
                    }
                ],
                "TopicName": "aip-dev-sns-day-changed"
            }
        },
        "testaipsnsdaychanged": {
            "Type": "AWS::SNS::Topic",
            "Properties": {
                "Subscription": [
                    {
                        "Endpoint": {
                            "Fn::Join": [
                                "",
                                [
                                    "arn:aws:sqs:",
                                    {
                                        "Ref": "AWS::Region"
                                    },
                                    ":",
                                    {
                                        "Ref": "AWS::AccountId"
                                    },
                                    ":bi-test-sqs-datapipeline-service"
                                ]
                            ]
                        },
                        "Protocol": "sqs"
                    }
                ],
                "TopicName": "aip-test-sns-day-changed"
            }
        },
        "qaaipsnsdaychanged": {
            "Type": "AWS::SNS::Topic",
            "Properties": {
                "Subscription": [
                    {
                        "Endpoint": {
                            "Fn::Join": [
                                "",
                                [
                                    "arn:aws:sqs:",
                                    {
                                        "Ref": "AWS::Region"
                                    },
                                    ":",
                                    {
                                        "Ref": "AWS::AccountId"
                                    },
                                    ":bi-qa-sqs-datapipeline-service"
                                ]
                            ]
                        },
                        "Protocol": "sqs"
                    }
                ],
                "TopicName": "aip-qa-sns-day-changed"
            }
        },
        "prodaipsnsdaychanged": {
            "Type": "AWS::SNS::Topic",
            "Properties": {
                "Subscription": [
                    {
                        "Endpoint": {
                            "Fn::Join": [
                                "",
                                [
                                    "arn:aws:sqs:",
                                    {
                                        "Ref": "AWS::Region"
                                    },
                                    ":",
                                    {
                                        "Ref": "AWS::AccountId"
                                    },
                                    ":bi-prod-sqs-datapipeline-service"
                                ]
                            ]
                        },
                        "Protocol": "sqs"
                    }
                ],
                "TopicName": "aip-prod-sns-day-changed"
            }
        }
    }
}